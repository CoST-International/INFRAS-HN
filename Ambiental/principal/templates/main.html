{% extends "base.html" %}
        {% block content %}
            
            <div id="search">
            <h3>Filtrar proyectos por:</h3>
            &nbsp;

                <form method="post" action="{% url 'main' %}" >
                {% csrf_token %} 
                    <div class="form-group">
                        <label class="sr-only" for="nombre">Proyecto</label>
                        <input type="text" name="nombre" style="font-size:17px;" class="form-control" id="nombre" placeholder="Buscar un proyecto">
                        <small id="textHelp" style="color:#ffffff;" class="form-text text-muted">Ingrese una palabra o nombre de proyecto a buscar o seleccione un filtro</small>
                    </div>
                     
                    <h4> Validaci贸n infra</h4>
                   
                     <div class="form-check">
                          <input class="form-check-input radio_c" type="checkbox" value="c1" id="c1" name="c1">
                          <img style="width: 15px;"src="/resources/pictures/marker1.png">
                          <label class="form-check-label radio_label" for="c1">
                                Conformidad
                          </label>
                    </div>
                    <div class="form-check">
                          <input class="form-check-input radio_c" type="checkbox" value="c4" id="c4" name="c4">
                          <label class="form-check-label radio_label" for="c4">
                          <img style="width: 15px;"src="/resources/pictures/marker4.png">
                                Existe inconsistencia
                          </label>
                    </div>
                    <div class="form-check">
                          <input class="form-check-input radio_c" type="checkbox" value="c2" id="c2" name="c2">
                          <label class="form-check-label radio_label" for="c2">
                          <img style="width: 15px;"src="/resources/pictures/marker2.png">
                                No tiene licencia
                          </label>
                    </div>
                    <div class="form-check">
                          <input class="form-check-input radio_c" type="checkbox" value="c3" id="c3" name="c3">
                          <label class="form-check-label radio_label" for="c3">
                          <img style="width: 15px;"src="/resources/pictures/marker3.png">
                                No existe informaci贸n
                          </label>
                    </div>
                    <!--<div style="height:30px; ">
                    <div class="col-sm-3 my-1">
                     
                        <div class="form-check form-check-inline">
                            <input class="form-check-input radio_c" name="la_si" type="checkbox" id="la_si" value="1">
                            <label class="form-check-label radio_label" for="la_si">Si</label>
                        </div>
                    </div>
                    <div class="col-sm-3 my-1">
                        <div class="form-check form-check-inline">
                            <input  class="form-check-input radio_c" name="la_no" type="checkbox" id="la_no" value="2">
                            <label  class="form-check-label radio_label" for="la_no">No</label>
                        </div>
                    </div>
                    </div>
                    
                    
                    
                    <h4>Tipo de Licencia</h4>
                    
                    
                    <div style="height:40px; ">
                    <div class="col-sm-3 my-1">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input radio_c" type="checkbox" id="c1" name="c1" value="1">
                            <label class="form-check-label radio_label" for="c1">C1</label>
                        </div>
                    </div>
                    <div class="col-sm-3 my-1">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input radio_c" type="checkbox" id="c2" name="c2" value="2">
                            <label class="form-check-label radio_label" for="c2">C2</label>
                        </div>
                    </div>
                    <div class="col-sm-3 my-1">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input radio_c" type="checkbox" id="c3" name="c3" value="3">
                            <label class="form-check-label radio_label" for="c3">C3</label>
                        </div>
                    </div>
                    <div class="col-sm-3 my-1">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input radio_c" type="checkbox" id="c4" name="c4" value="4">
                            <label class="form-check-label radio_label" for="c4">C4</label>
                        </div>
                    </div>
                    </div>-->
                    
                    
                    <h4>Tipo de Proyecto</h4>
                    
                    
                    <div class="form-check">
                          <input class="form-check-input radio_c" type="checkbox" value="inlineCheckbox7" id="cons" name="cons">
                          <label class="form-check-label radio_label" for="cons">
                                Construcci贸n
                          </label>
                    </div>
                    <div class="form-check">
                          <input class="form-check-input radio_c" type="checkbox" value="inlineCheckbox8" id="reha" name="reha">
                          <label class="form-check-label radio_label" for="reha">
                                Rehabilitaci贸n
                          </label>
                    </div>
                    <div class="form-check">
                          <input class="form-check-input radio_c" type="checkbox" value="inlineCheckbox9" id="mant" name="mant">
                          <label class="form-check-label radio_label" for="mant">
                                Mantenimiento
                          </label>
                    </div>
                    <button  style=" color:black;" class="btn btn-outline-success btn_busca" type="submit" >Buscar</button>

                </form>
            </div>
            <div id="map"></div>  

             <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
       #search{
            float: left;
            background-color: #555;
            width: 25%;
            height: 89vh;
            color: #ffffff; 
            padding: 10px 2% 0px 2%;
       }
        #map {
            width: 75%;
            height: 89vh;
            float: left;
        }
        .radio_c{
            width:15px;
            height:15px;
        }
        .radio_label{
            font-size: 11px;
            margin-bottom: 3px;
            margin-top: 3px;
        }
        .btn_busca{
            color: black;
            margin: 35px 0px 0px 0px;
            width: 124px;
            height: 42px;
        }
        .info{
          /*color:#29dd9f;*/
        }

      
      /* Optional: Makes the sample page fill the window. */

    </style>
    <script>

      var image = '/resources/pictures/marker1.png';  
      var image1= '/resources/pictures/marker2.png';  
      var image2= '/resources/pictures/marker3.png';  
      var image3= '/resources/pictures/marker4.png'; 
      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {

         
          center: {lat: {{latitud}}, lng: {{longitud}}},
          
          zoom: 8,
          mapTypeId: 'terrain',
          mapTypeControl: true,
    mapTypeControlOptions: {
        style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
        position: google.maps.ControlPosition.TOP_CENTER
    },
          zoomControl: true,
          zoomControlOptions: {
              position: google.maps.ControlPosition.LEFT_CENTER
          },
          scaleControl: true,
          streetViewControl: true,
          streetViewControlOptions: {
              position: google.maps.ControlPosition.LEFT_TOP
          },
          styles:

[
  {
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#f5f5f5"
      }
    ]
  },
  {
    "elementType": "labels",
    "stylers": [
      {
        "weight": 8
      }
    ]
  },
  {
    "elementType": "labels.icon",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "elementType": "labels.text.stroke",
    "stylers": [
      {
        "color": "#f5f5f5"
      }
    ]
  },
  {
    "featureType": "administrative",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#757575"
      }
    ]
  },
  {
    "featureType": "administrative.country",
    "elementType": "labels",
    "stylers": [
      {
        "visibility": "off"
      }
    ]
  },
  {
    "featureType": "administrative.land_parcel",
    "elementType": "labels.text",
    "stylers": [
      {
        "color": "#757575"
      }
    ]
  },
  {
    "featureType": "administrative.land_parcel",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#bdbdbd"
      }
    ]
  },
  {
    "featureType": "poi",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#eeeeee"
      }
    ]
  },
  {
    "featureType": "poi",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#757575"
      }
    ]
  },
  {
    "featureType": "poi.park",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#e5e5e5"
      }
    ]
  },
  {
    "featureType": "poi.park",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#9e9e9e"
      }
    ]
  },
  {
    "featureType": "road.arterial",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#757575"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#dadada"
      }
    ]
  },
  {
    "featureType": "road.highway",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#616161"
      }
    ]
  },
  {
    "featureType": "road.local",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#9e9e9e"
      }
    ]
  },
  {
    "featureType": "transit.line",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#e5e5e5"
      }
    ]
  },
  {
    "featureType": "transit.station",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#eeeeee"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "geometry",
    "stylers": [
      {
        "color": "#c9c9c9"
      }
    ]
  },
  {
    "featureType": "water",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#9e9e9e"
      }
    ]
  }
]

        
        });

        
        {% for pro in proyectos %}
        {% load humanize %}
            var uluru{{pro.id}}={lat: {{ pro.latitud }}, lng: {{ pro.longitud }}};
            var contentString{{pro.id}} = '<div id="content" style="min-height:auto;width: 250px;font-size:11px;padding: 3px;">'+
                '<div id="siteNotice">'+
                '</div>'+
                '<h6 id="firstHeading" class="firstHeading">{{ pro.nombre }}</h6>'+
                '<div id="bodyContent">'+
                    '<table><tbody>'+
                         '<tr style="height:30px">'+
                            '<td><i class="fas fa-file-signature"></i></td>'+
                            '<td>{{ pro.descripcion }}</td>'+
                        '</tr>'+
                        '<tr style="height:30px">'+
                            '<td><i class="fas fa-map-marked-alt"></td>'+
                            '<td>{{pro.departamento}},{{pro.municipio}}</td>'+
                        '</tr>'+
                        '<tr style="height:30px">'+
                            '{%if pro.valida_ambiental == 1 %}'+
                            '<td><img style="width: 15px;"src="/resources/pictures/marker1.png"></td>'+
                            '<td>CONFORMIDAD</td>'+
                            '{%elif pro.valida_ambiental == 2%}'+
                            '<td><img style="width: 15px;"src="/resources/pictures/marker2.png"></td>'+
                            '<td>NO TIENE LICENCIA</td>'+    
                            '{%elif pro.valida_ambiental == 3%}'+
                            '<td><img style="width: 15px;"src="/resources/pictures/marker3.png"></td>'+
                            '<td>NO EXISTE INFORMACION</td>'+  
                            '{%elif pro.valida_ambiental == 4%}'+
                            '<td><img style="width: 15px;"src="/resources/pictures/marker4.png"></td>'+
                            '<td>EXITE INCONGRUENCIA</td>'+  
                            '{%endif%}'+                        
                        '</tr>'+
                        /*'<tr style="height:30px">'+
                            '<td><i class="fas fa-coins"></td>'+
                            '<td>{{pro.precio|floatformat:2}}</td>'+
                        '</tr>'+*/
                        '<tr style="height:10px; color:#32794e;">'+
                            '<td><i class="fas fa-external-link-alt info"></td>'+
                            '<td><a style="color:#32794e;" class="info"  style=" " href="{% url "proyectos_detalle" pro.pk %}">Mas Informacion</a></td>'+
                        '</tr>'+
                    '</tbody>'+
                    
                    '</table>'+
                    '<p><b></b></p>'+
                    
                    '</div>'+
                '</div>';

            var infowindow{{pro.id}} = new google.maps.InfoWindow({
              content: contentString{{pro.id}}
            });

            var marker{{pro.id}} = new google.maps.Marker({
              position: uluru{{pro.id}},
              map: map,
              {%if pro.valida_ambiental == 1 %}
              icon: image,
              {%elif pro.valida_ambiental == 2 %}
              icon: image1,
              {%elif pro.valida_ambiental == 3 %}
              icon: image2,
              {%elif pro.valida_ambiental == 4 %}
              icon: image3,
              {%endif%}
              title: '{{pro.municipio}}'
            });
            marker{{pro.id}}.addListener('click', function() {
              infowindow{{pro.id}}.open(map, marker{{pro.id}});
            });
         {% endfor %}









      }











    </script>
    <!--AIzaSyDOdGm7yHPJn_GwH5pfgTgVIGOExkW7bkw-->
    
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBn4ZbdJ8DFFTqJw5jLge_kTIbzhT5265c&callback=initMap"
    async defer></script>
        {% endblock %}